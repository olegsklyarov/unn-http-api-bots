# –õ–µ–∫—Ü–∏—è 5. –î–∏—Å–ø–µ—Ç—á–µ—Ä

## –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –≤ —á–∞—Ç-–±–æ—Ç–∞—Ö

### üîé –§–∏–ª—å—Ç—Ä –∞–ø–¥–µ–π—Ç–æ–≤ –≤ Telegram Bot API

–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `allowed_updates` —É –º–µ—Ç–æ–¥–∞ [getUpdates](https://core.telegram.org/bots/api#getupdates). –î–æ–ª–∂–µ–Ω
–±—ã—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω `callback_query`!

‚ùó–ï—Å–ª–∏ –¥–æ –í–∞—Å –±–æ—Ç–æ–º –≤–ª–∞–¥–µ–ª –∫—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–π, —Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —ç—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä.

### ‚å®Ô∏è –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É?

–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `reply_markup` —É –º–µ—Ç–æ–¥–∞ [sendMessage](https://core.telegram.org/bots/api#sendmessage).

* –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø–æ–¥ –±–ª–æ–∫–æ–º –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è [ReplyKeyboardMarkup](https://core.telegram.org/bots/api#replykeyboardmarkup)
    * –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ ‚Äî –ø—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–≤–ª—è–µ—Ç –≤ —á–∞—Ç —Ç–µ–∫—Å—Ç, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ –∫–Ω–æ–ø–∫–µ. –í –±–æ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ–±—ã—á–Ω—ã–π update —Å `message` –∏
      `text`.
    * –£–±—Ä–∞—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É ‚Äî [ReplyKeyboardRemove](https://core.telegram.org/bots/api#replykeyboardremove). ‚ùó–ï—Å–ª–∏ –¥–æ –í–∞—Å
      –±–æ—Ç–æ–º –≤–ª–∞–¥–µ–ª –∫—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–π, —Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—ã–∑—ã–≤–∞–µ–º —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –¥–ª—è —Å–±—Ä–æ—Å–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã.
* –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º –≤ –æ–±–ª–∞—Å—Ç–∏
  —á–∞—Ç–∞ [InlineKeyboardMarkup](https://core.telegram.org/bots/api#inlinekeyboardmarkup)
    * –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ (–µ—Å–ª–∏ —É inline –∫–Ω–æ–ø–∫–∏ —É–∫–∞–∑–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `callback_data`) ‚Äî –≤ –±–æ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç update —Å —Ç–∏–ø–æ–º
      `callback_query`, –∞ `message` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç!
    * –°–º. [CallbackQuery](https://core.telegram.org/bots/api#callbackquery) –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —ç—Ç–æ–≥–æ –∞–ø–¥–µ–π—Ç–∞.
      –ì–ª–∞–≤–Ω–æ–µ ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥
      [answerCallbackQuery](https://core.telegram.org/bots/api#answercallbackquery).

–£–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ —á–∞—Ç–∞ ‚Äî [deleteMessage](https://core.telegram.org/bots/api#deletemessage). –ù–∞–ø—Ä–∏–º–µ—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å
–ø–æ–ª–µ–∑–Ω–æ –¥–ª—è inline –∫–Ω–æ–ø–∫–∏ ¬´–û—Ç–º–µ–Ω–∞¬ª.


### üçù Spaghetti code 
_(–º–∞–∫–∞—Ä–æ–Ω–Ω—ã–π –∫–æ–¥, –∏–Ω–¥—É—Å—Å–∫–∏–π –∫–æ–¥)_

–ü—Ä–∏ –ø—Ä—è–º–æ–ª–∏–Ω–µ–π–Ω–æ–º –ø–æ–¥—Ö–æ–¥–µ, –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤—ã–∑–æ–≤–∞ [getUpdates](https://core.telegram.org/bots/api#getupdates)
–ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ ¬´spaghetti code¬ª ‚Äî –º–Ω–æ–≥–æ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö `if`-–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ç—è–∂–µ–ª–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å. –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–µ—Ç
–≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –±–∞–≥–æ–≤ üêû.

## –ü–∞—Ç—Ç–µ—Ä–Ω Observer
_(aka. Event-Subscriber, Listener)_

https://refactoring.guru/design-patterns/observer

## –†–µ–∞–ª–∏–∑—É–µ–º –¥–∏—Å–ø–µ—Ç—á–µ—Ä –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏

TODO

## –ü—Ä–∏–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

TODO
